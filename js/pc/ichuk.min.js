/*
* ichuk js
* ichuk.com all rights reserved
* 2013
*/

var documentURL = document.URL;
var RETURN_JSON = '';
var currentTimeActive = 1;
var unixTimer = 0;
RETURN_JSON +='[';
RETURN_JSON +=' [';
RETURN_JSON +='	 {"name":"首页","request":"index","requesttype":"goto","requestid":"0","href":"../","icon":"","linkpage":"0"},'; 
RETURN_JSON +=' ],';
RETURN_JSON +=' ['; 
RETURN_JSON +='	 {"name":"数据校验","request":"index","requesttype":"tools","requestid":"0","icon":"","linkpage":"1","secondlist":';
RETURN_JSON +=    '[';
RETURN_JSON +=      '{"name":"Json在线解析","request":"json_analyse","requesttype":"tools","requestid":"0","href":"../?code/&tools&type=tools&value=json_analyse","icon":"","linkpage":"0"},';
RETURN_JSON +=      '{"name":"base64加密解密","request":"base64","requesttype":"tools","requestid":"1","href":"../?code/&tools&type=tools&value=base64","icon":"","linkpage":"0"},';
RETURN_JSON +=      '{"name":"UNIX时间戳转换","request":"unix","requesttype":"tools","requestid":"2","href":"../?code/&tools&type=tools&value=unix","icon":"","linkpage":"0"},';
RETURN_JSON +=      '{"name":"抽奖概率","request":"lottery","requesttype":"tools","requestid":"3","href":"../?code/&tools&type=tools&value=lottery","icon":"","linkpage":"0"},';
RETURN_JSON +=      '{"name":"大乐透模拟抽奖","request":"daletou","requesttype":"tools","requestid":"4","href":"../?code/&tools&type=tools&value=daletou","icon":"","linkpage":"0"},';
RETURN_JSON +=    ']';
RETURN_JSON +='  },';
RETURN_JSON +='	 {"name":"微信编辑器","request":"index","requesttype":"onlineeditor","requestid":"1","href":"../?code/wxeditor","icon":"","linkpage":"1","secondlist":';
RETURN_JSON +=    '[';
RETURN_JSON +=      '{"name":"ueditor","request":"ueditor","requesttype":"onlineediter","requestid":"0","icon":"","linkpage":"0"},';
RETURN_JSON +=      '{"name":"kindeditor","request":"kindeditor","requesttype":"onlineediter","requestid":"1","icon":"","linkpage":"0"},'; 
RETURN_JSON +=    ']';
RETURN_JSON +='  },';
RETURN_JSON +='  {"name":"版本号:©2015 BETA 0.9","request":"sysinfo","requesttype":"getinfo","requestid":"6","icon":"","linkpage":"0"}';
RETURN_JSON +=' ]';
RETURN_JSON +=']';
var RETURN_OBJ = eval ("(" + RETURN_JSON + ")");
var TOP_MENU_ARR = RETURN_OBJ[0]; 
var SIDE_MENU_ARR = RETURN_OBJ[1];

$(document).ready(function () {
    
    INIT_DOCUMENT_JS(); 
    $(window).scroll(function(){
       var istop = $("body").find("#quickGuide-wrap").size();
       if( istop !== 0)
       {
           var scollHeight = $(document).scrollTop();
           var standHeight = 0;
           var ulnum = $("body").find("#quickGuide-wrap").find('ul').size();
           if ( ulnum == 1 || ulnum == 2)
           {
               $("body").find("#quickGuide-wrap").append('<ul class="guestbook"><a href="http://www.ichuk.com/plus/guestbook.php" title="意见反馈">意见反馈</a></ul><ul><img src="http://www.ichuk.com/templets/default/images/iichuk_wechat.jpg" width=65 title="扫一扫,赞微信" alt="爱察网微信"></ul>');
           }
           if(scollHeight >= standHeight)
           {
               $("#quickGuide-wrap").fadeIn();
           }
           else
           {
               $("#quickGuide-wrap").fadeOut();
           }
       }
    });
});

/*Funcion Library*/

function INIT_DOCUMENT_JS()
{ 
    window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"2","bdPos":"right","bdTop":"197"}};
    with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
}

/*
* INIT_CODE_TEMPLET()
* 初始化程序员工具模板
* Version 2014.6.3
*/
function INIT_CODE_TEMPLET()
{ 
    var html2 = '';
	$.each(SIDE_MENU_ARR, function(commentIndex,data) {
		if (data != undefined)
		{
		     var action = 'onclick="initMy(\''+data['requesttype']+'\',\''+data['request']+'\',\''+data['requestid']+'\',\''+data['linkpage']+'\')"';
		     if(data['href']!=undefined && data['href'] !='')
		     {
			     action = 'href=\"'+data['href']+'\"';
		     }
			 if (data['request']=='sysinfo')
			 {
				 html2 += '<a style="font-size:12px;border-top:1px solid #ccc;" rel-data="'+ data['requestid'] +'" '+action+'>'+ data['name'] +'</a>';
			 }
			 else
			 {
				 html2 += '<a class="side_itemsection side_item_'+ data['requestid'] +'" rel-data="'+ data['requestid'] +'" '+action+'>'+ data['name'] +'</a>';
				 var secondlist = data['secondlist'];
				 if (secondlist != undefined)
				 {
					 html2 += '<div style=\"height:0;\" class=\"secondlist\" reid='+data['requestid']+'>';
					 $.each(secondlist, function(commentIndex,sdata) {
					     var saction = 'onclick="initMy(\''+sdata['requesttype']+'\',\''+sdata['request']+'\',\''+ data['requestid'] +'_'+sdata['requestid']+'\',\''+sdata['linkpage']+'\')"';
					     if(sdata['href']!=undefined && sdata['href'] !='')
					     {
						     saction = 'href=\"'+sdata['href']+'\"';
					     }
						 if (sdata!= undefined)
						 {
							 html2 += '<a class="head_itemsection head_item_'+ data['requestid'] +'_'+sdata['requestid']+'" rel-data="'+ data['requestid'] +'_'+sdata['requestid']+'" '+saction+'>'+ sdata['name'] +'</a>';
						 } 
					 })
					 html2 += '</div>';
				 }
			 }
		} 
	})
	html2 += '<a style=\"padding:10px 0 0 0;background-color: transparent;border: none;border-radius: initial;margin-top: 20px;border-top: 2px solid #ccc;\" target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=1204037812&site=qq&menu=yes"><img width=88 border="0" src="http://wpa.qq.com/pa?p=2:1204037812:41" alt="点击这里给我发消息" title="点击这里给我发消息"/></a>';
	html2 += '<a style=\"padding: 5px 0 0 0;background-color: transparent;border: none;border-radius: initial; \" target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=a9d6059b96deb44423d7dcd426951099f82dcf0ffb1f90193aa160e0370caa94"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="iChuk 技术交流" title="iChuk 技术交流"></a>';
	innerHtml("#side",html2);
}

/*
* initMy(type)
* 初始化页面布局
* type - > string
*/

function initMy(type,value,reid,linkpage)
{  
    if (documentURL.indexOf("#") < 0 )
	{
	   window.location.href = documentURL+'#type='+type+'|value='+value;
	}
	else{
	   var urlvaluearr = documentURL.split('#');
	   var combineurl = urlvaluearr[0]+'#type='+type+'|value='+value;
	   window.location.href = combineurl;
	}
 
	 /*
	 * 判断是否有子栏目
	 */
	 if (Number(linkpage) == 1)
	 {
		 var object = $('body').find('div.secondlist[reid='+reid+']');
		 var nowHeight = object.height();
		 if ( nowHeight == 0)
		 {
			 object.animate({height:"100%"});
		 }
		 else if (nowHeight > 0){
			 object.animate({height:"0px"});
		 }  
	 }
	 /*
	 * 判断是否有子栏目 END
	 */
	 
	if ( type=='tools')
	{  
		if(value=='index'){setMenuStatus('#side','a','rel-data','0','on','');}
		else if(value=='json_analyse'){setMenuStatus('.secondlist','a','rel-data','0_0','on','');INIT_JSON_ANALYSE();}
		else if(value=='base64'){setMenuStatus('.secondlist','a','rel-data','0_1','on','');INIT_BASE64();}
		else if(value=='unix'){setMenuStatus('.secondlist','a','rel-data','0_2','on','');INIT_UNIX();}
		else if(value=='lottery'){setMenuStatus('.secondlist','a','rel-data','0_3','on','');INIT_LOTTERY();}
		else if(value=='daletou'){setMenuStatus('.secondlist','a','rel-data','0_4','on','');INIT_DALETOU();}
	}
	else if ( type=='app_manage')
	{  
		if(value=='app'){ INIT_APP(); }; /**APP**/
	}
	else if ( type=='onlineeditor')
	{  
		if(value=='ueditor'){setMenuStatus('.secondlist','a','rel-data','1_0','on','');INIT_UEDITOR(); }; /**editor**/
	}
}

function INIT_UEDITOR()
{
    var CONTAIN = "#main";
    var WRAP = "unix";
    
}

function INIT_DALETOU()
{
	var CONTAIN = "#main";
    var WRAP = "lottery";
    LoadTemplets = "../templets/code/lottery_daletou.html";
    htmlobj=$.ajax({url:LoadTemplets,async:false});
    var html = htmlobj.responseText;
    $(CONTAIN).empty(); 
    innerHtml(CONTAIN,html);
}

function INIT_LOTTERY()
{
    var CONTAIN = "#main";
    var WRAP = "lottery";
    LoadTemplets = "../templets/code/lottery.html";
    htmlobj=$.ajax({url:LoadTemplets,async:false});
    var html = htmlobj.responseText;
    $(CONTAIN).empty(); 
    innerHtml(CONTAIN,html);
}

function INIT_UNIX()
{
    var CONTAIN = "#main";
    var WRAP = "unix";
    var html = '<div class=\"'+WRAP+'\" style=\"padding: 10px;font-size: 14px;border: 1px solid #A5C2CE; border-radius: 5px;\">\
                    <div class=\"now_unix\" style=\"overflow: hidden;line-height: 30px;border-bottom:1px dotted #ccc;padding:10px 0\">\
                        <span style=\"display: block;float: left;\">现在的Unix时间戳(Unix timestamp)是</span>\
                        <span style=\"margin-left: 20px;border: 2px solid #33BED8;background-color: #88D8FF;display: block;height: 30px;width: 100px;float: left;text-align: center;color: white;\" id=\"now_unix_time\"></span>\
                    </div>\
                    <div class=\"exchange\" style=\"overflow: hidden;line-height: 30px;border-bottom:1px dotted #ccc;padding:10px 0\">\
                        <span style=\"margin-bottom:10px;display: block;clear: both;font-size: 16px;font-weight: bold;color: rgb(0, 72, 150);\">Unix时间戳(Unix timestamp) → 北京时间</span>\
                        <span style=\"display: block;float: left;\">Unix时间戳(Unix timestamp) </span>\
                        <span style=\"margin-left: 20px;display: block;float: left;\">\
                            <input style=\"border: 1px solid #6088A3;height: 28px;padding: 0 5px;font-size: 16px;color: rgb(233, 0, 0);\" type=\"text\" name=\"input_unix\" />\
                        </span>\
                        <span style=\"margin-left: 20px;display: block;float: left;\">\
                            <input id=\"exchange\" value=\"转换\" style=\"border: 1px solid #6088A3;height: 29px;padding: 0 10px;font-size: 15px;cursor: pointer;background-color: #00ADFF;color: rgb(255, 255, 255);\" type=\"button\" />\
                        </span>\
                        <span style=\"margin-left: 20px;display: block;float: left;\">\
                            北京时间\
                            <input readonly=on style=\"width: 220px;border: 1px solid #BBBBBB;height: 28px;padding: 0 10px;font-size: 15px;cursor: pointer;\" type=\"text\" name=\"result_input_unix\" />\
                        </span>\
                    </div>\
                    <div class=\"exchange_to_unix\" style=\"overflow: hidden;line-height: 30px;border-bottom:1px dotted #ccc;padding:10px 0\">\
                        <span style=\"margin-bottom:10px;display: block;clear: both;font-size: 16px;font-weight: bold;color: rgb(0, 72, 150);\">北京时间 → Unix时间戳(Unix timestamp)</span>\
                        <span style=\"display: block;float: left;\">北京时间</span>\
                        <span style=\"margin-left: 20px;display: block;float: left;\">\
				            <input style=\"text-align: center;border: 1px solid #6088A3;height: 28px;padding: 0 5px;font-size: 16px;color: rgb(233, 0, 0);\" type="text" class="input" size="2" name="year" maxlength="4"> 年\
							<input style=\"text-align: center;border: 1px solid #6088A3;height: 28px;padding: 0 5px;font-size: 16px;color: rgb(233, 0, 0);\" type="text" class="input" size="1" name="month" maxlength="2"> 月\
							<input style=\"text-align: center;border: 1px solid #6088A3;height: 28px;padding: 0 5px;font-size: 16px;color: rgb(233, 0, 0);\" type="text" class="input" size="1" name="day" maxlength="2"> 日\
							<input style=\"text-align: center;border: 1px solid #6088A3;height: 28px;padding: 0 5px;font-size: 16px;color: rgb(233, 0, 0);\" type="text" class="input" size="1" name="hour" maxlength="2"> 时\
							<input style=\"text-align: center;border: 1px solid #6088A3;height: 28px;padding: 0 5px;font-size: 16px;color: rgb(233, 0, 0);\" type="text" class="input" size="1" name="minute" maxlength="2"> 分\
							<input style=\"text-align: center;border: 1px solid #6088A3;height: 28px;padding: 0 5px;font-size: 16px;color: rgb(233, 0, 0);\" type="text" class="input" size="1" name="second" maxlength="2"> 秒\
                        </span>\
                        <span style=\"margin-left: 20px;display: block;float: left;\">\
                            <input id=\"exchange_normal\" value=\"转换\" style=\"border: 1px solid #6088A3;height: 29px;padding: 0 10px;font-size: 15px;cursor: pointer;background-color: #00ADFF;color: rgb(255, 255, 255);\" type=\"button\" />\
                        </span>\
                        <span style=\"margin-left: 20px;display: block;float: left;\">\
                            Unix时间戳\
                            <input readonly=on style=\"width: 220px;border: 1px solid #BBBBBB;height: 28px;padding: 0 10px;font-size: 15px;cursor: pointer;\" type=\"text\" name=\"result_input_normal\" />\
                        </span>\
                    </div>\
                    <div style=\"overflow: hidden;line-height: 30px;border-bottom:1px dotted #ccc;padding:10px 0\">\
                        <h3>如何在不同编程语言中获取现在的Unix时间戳(Unix timestamp)？</h3>\
                        <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Java</i>	time\
					    </span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >JavaScript</i>Math.round(new Date().getTime()/1000)&nbsp;&nbsp;&nbsp;getTime()返回数值的单位是毫秒\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Microsoft .NET / C#</i>epoch = (DateTime.Now.ToUniversalTime().Ticks - 621355968000000000) / 10000000\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >MySQL</i>SELECT unix_timestamp(now())\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Perl</i>time\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >PHP</i>time()\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >PostgreSQL</i>SELECT extract(epoch FROM now())\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Python</i>	先 import time 然后 time.time()\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Ruby</i><d>获取Unix时间戳：Time.now 或 Time.new</br>显示Unix时间戳：Time.now.to_i</d>\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >SQL Server</i>	SELECT DATEDIFF(s, \'1970-01-01 00:00:00\', GETUTCDATE())\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Unix / Linux</i>	date +%s\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >VBScript / ASP</i>	DateDiff("s", "01/01/1970 00:00:00", Now())\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >其他操作系统</br><dt>(如果Perl被安装在系统中)</dt>	</i>命令行状态：perl -e "print time"\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
						<h3>如何在不同编程语言中实现Unix时间戳(Unix timestamp) → 普通时间？</h3>\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Java</i>	String date = new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format(new java.util.Date(Unix timestamp * 1000))\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >JavaScript</i>	先 var unixTimestamp = new Date(Unix timestamp * 1000) 然后 commonTime = unixTimestamp.toLocaleString()\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Linux</i>	date -d @Unix timestamp\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >MySQL</i>	from_unixtime(Unix timestamp)\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Perl</i>	先 my $time = Unix timestamp 然后	my ($sec, $min, $hour, $day, $month, $year) = (localtime($time))[0,1,2,3,4,5,6]\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >PHP</i>	date(\'r\', Unix timestamp)\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >PostgreSQL</i>SELECT TIMESTAMP WITH TIME ZONE \'epoch\' + Unix timestamp) * INTERVAL \'1 second\';\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Python</i>先 import time 然后 time.gmtime(Unix timestamp)\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Ruby</i>Time.at(Unix timestamp)\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >SQL Server</i>DATEADD(s, Unix timestamp, \'1970-01-01 00:00:00\')\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >VBScript / ASP</i>DateAdd("s", Unix timestamp, "01/01/1970 00:00:00")\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >其他操作系统</br><dt>(如果Perl被安装在系统中)	</dt></i>命令行状态：perl -e "print scalar(localtime(Unix timestamp))"\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
						<h3>如何在不同编程语言中实现普通时间 → Unix时间戳(Unix timestamp)？</h3>\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Java</i>long epoch = new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm:ss").parse("01/01/1970 01:00:00");\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >JavaScript</i>var commonTime = new Date(Date.UTC(year, month - 1, day, hour, minute, second))\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >MySQL</i><d>SELECT unix_timestamp(time)</br>时间格式: YYYY-MM-DD HH:MM:SS 或 YYMMDD 或 YYYYMMDD</d>\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Perl</i>先 use Time::Local 然后	my $time = timelocal($sec, $min, $hour, $day, $month, $year);\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >PHP</i>mktime(hour, minute, second, month, day, year)\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >PostgreSQL</i>SELECT extract(epoch FROM date(\'YYYY-MM-DD HH:MM:SS\'));\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Python</i>先 import time 然后 int(time.mktime(time.strptime(\'YYYY-MM-DD HH:MM:SS\',\'%Y-%m-%d %H:%M:%S\')))\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Ruby</i>Time.local(year, month, day, hour, minute, second)\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >SQL Server</i>SELECT DATEDIFF(s,\'1970-01-01 00:00:00\', time)\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >Unix / Linux</i>date +%s -d"Jan 1, 1970 00:00:01"\
						</span>\
					    <span style=\" display: block;clear: both;font-size: 14px;\">\
							<i >VBScript / ASP</i>DateDiff("s", "01/01/1970 00:00:00", time)\
						</span>\
                    </div>\
                </div>';
    if($(CONTAIN).find("."+WRAP).size() == 0)
    {
        $(CONTAIN).empty(); 
	    innerHtml(CONTAIN,html);
	    currentTime();
	    $(CONTAIN).find('i').css({
		   "display":"block",
		   "float":"left",
		   "color": "rgb(3, 88, 128)",
		   "font-style":"initial",
		   "font-weight":" bold",
		   "width":"140px",
	    });
	    $(CONTAIN).find('dt').css({ 
		   "color": "rgb(122, 122, 122)",
		   "font-style":"initial",
		   "font-weight":" 100",
		   "font-size":"12px",
	    });
	    $(CONTAIN).find('d').css({ 
		   "display":"block",
		   "float":"left",
	    });
	    $(CONTAIN).find('#exchange').click(function(){
		    var unixtime=$(CONTAIN).find('input[name=input_unix]').val();
			var unixTimestamp = new Date(unixtime* 1000); 
			commonTime = unixTimestamp.toLocaleString();
			$(CONTAIN).find('input[name=result_input_unix]').val(commonTime);
	    })
	    $(CONTAIN).find('#exchange_normal').click(function(){ 
			var humanDate = new Date(Date.UTC($(CONTAIN).find('input[name=year]').val(),(stripLeadingZeroes($(CONTAIN).find('input[name=month]').val())-1),stripLeadingZeroes($(CONTAIN).find('input[name=day]').val()),stripLeadingZeroes($(CONTAIN).find('input[name=hour]').val()),stripLeadingZeroes($(CONTAIN).find('input[name=minute]').val()),stripLeadingZeroes($(CONTAIN).find('input[name=second]').val())));  
			$(CONTAIN).find('input[name=result_input_normal]').val(humanDate.getTime()/1000 - 8*60*60);
	    })
    } 
}

function currentTime() {
	var timeNow = new Date();
	$('#now_unix_time').html(Math.round(timeNow.getTime()/1000));
	if (currentTimeActive) {
		unixTimer = setTimeout("currentTime()", 1000);
	}
}
function startTimer() {
	currentTimeActive = 1;
	currentTime();
}
function stopTimer() {
	currentTimeActive = 0;
	clearTimeout(unixTimer);
}
function stripLeadingZeroes(input) {
    if((input.length > 1) && (input.substr(0,1) == "0")) {
		return input.substr(1);
	} else {
		return input;
	}
}

function INIT_BASE64()
{
    var CONTAIN = "#main";
    var WRAP = "base64";
    var html = '<div class=\"'+WRAP+'\" style=\" border: 1px solid #A5C2CE; border-radius: 5px;\">\
                   <div class=\"tab-host\" style=\"overflow: hidden; background-color: #ECECEC; padding: 0 10px;\">\
                       <div class=\"tab on\" style=\"cursor:pointer;padding: 3px 5px;float: left;background-color: #59B4FC;color: white;\">base64 加密解密</div>\
                   </div>\
                   <div class=\"tab-contain\" style=\"overflow:hidden;background-color: #59B4FC; padding: 5px;\">\
                       <div class=\"tab-item on\">\
		                   <textarea placeholder=\"源数据\" style="float:left;width:46%;height:300px;padding:1%;font-family: monospace;border: 1px solid #B5B8C8;background-color: rgb(250, 250, 250);border-radius: 5px;" autocomplete="off" id="orign" name="orign" ></textarea>\
		                   <ul style=\"position: absolute;left: 46%;padding: 0.5% 2%;\">\
		                       <a id=\"encode\" style=\"margin: 0 10px 0 0;display: block;float: left;padding: 5px;background-color: #F3F3F3;color: #003457;border-radius: 5px;border: 1px solid #C4C4C4;cursor: pointer;\">加密</a>\
		                       <a id=\"decode\" style=\"display: block;float: left;padding: 5px;background-color: #F3F3F3;color: #003457;border-radius: 5px;border: 1px solid #C4C4C4;cursor: pointer;\">解密</a>\
		                   </ul>\
		                   <textarea placeholder=\"结果\" style="float:right;width:46%;height:300px;padding:1%;font-family: monospace;border: 1px solid #B5B8C8;background-color: rgb(250, 250, 250);border-radius: 5px;" autocomplete="off" id="result" name="result" ></textarea>\
	                   </div>\
                   </div>\
                </div>';
    if($(CONTAIN).find("."+WRAP).size() == 0)
    {
        $(CONTAIN).empty();
	    innerHtml(CONTAIN,html);
	    
	    $(CONTAIN).find("#encode").click(function(){
		    var val = $(CONTAIN).find("#orign").val();
		    if(val !='')
		    {
			    var b = new Base64();  
	            var str = b.encode(val);   
	            $(CONTAIN).find("#result").val(str);
		    }
		    else
		    {
			    shortmsg("请输入内容再操作哦");
			    return;
		    }
		      
	    })
	    $(CONTAIN).find("#decode").click(function(){
		    var val = $(CONTAIN).find("#orign").val();
		    if(val !='')
		    {
			    var b = new Base64();    
	            str = b.decode(val);
	            $(CONTAIN).find("#result").val(str); 
		    }
		    else
		    {
			    shortmsg("请输入内容再操作哦");
			    return;
		    }
		      
	    })
    }
}

function INIT_JSON_ANALYSE()
{
    var CONTAIN = "#main";
    var WRAP = "json_analyse";
    var html = '<div class=\"'+WRAP+'\" style=\" border: 1px solid #A5C2CE; border-radius: 5px;\">\
                   <div style=\"overflow: hidden;padding: 10px;font-size: 16px;background-color: #F1F1F1;margin: 10px;border: 1px solid #ccc;border-radius: 5px;\">\
                       <span>输入地址(注意：需要接口支持跨域，默认使用JSONP格式请求)</span>\
                       <span style=\"margin: 10px 0 0 0;display: block;\">\
                           <input id=\"url\" style=\"font-size: 14px;padding: 5px 5%;width: 90%;\" type=\"text\" placeholder=\"输入请求接口地址\"/>\
                       </span>\
                       <span style=\"margin: 10px 0 0 0;display: block;\">\
                           <select id="request" style="font-size: 14px;border:1px solid #ccc;height: 30px;line-height:30px;">\
						       <option value="get">GET</option>\
							   <option value="post">POST</option>\
						   </select>\
                       </span>\
                       <span style=\"margin: 10px 0 0 0;display: block;\">\
                           <input style=\"padding: 5px;border: 1px solid #0085FF;color: white;background-color:#59B4FC;font-size: 16px;\" id=\"input\" type=\"button\" value=\"请求\" />\
                       </span>\
                       <span style=\"padding: 5px;display: block;font-size: 13px;background-color: #D3D3D3;border: 1px solid #C7C7C7;margin: 10px 0 0 0;border-radius: 5px;color: rgb(88, 88, 88);\">\
                           示例接口:  http://api.map.baidu.com/telematics/v3/weather?location=北京&output=json&ak=5slgyqGDENN7Sy7pw29IUvrZ\
                       </span>\
                   </div>\
                   <div class=\"tab-host\" style=\"overflow: hidden; background-color: #ECECEC; padding: 0 10px;font-size: 14px;\">\
                       <div class=\"tab on\" style=\"cursor:pointer;padding: 3px 5px;float: left;background-color: #59B4FC;color: white;\">JSON数据</div>\
                       <div id=\"tree\" class=\"tab\" style=\"cursor:pointer;padding: 3px 5px;float:left;\">视图</div>\
                   </div>\
                   <div class=\"tab-contain\" style=\"background-color: #59B4FC; padding: 5px;\">\
                       <div style=\"font-size: 14px;\" class=\"tab-item on\">\
	                       <div class=\"tool\" style=\"padding: 0 5px 5px 0;overflow: hidden;\">\
		                       <ul class=\"format\" style=\"float: left;padding: 3px 10px;background-color: #ECECEC;border-radius: 5px;cursor: pointer;\">格式化</ul>\
		                       <ul class=\"removewhite\" style=\"float:left;margin: 0 10px;padding: 3px 10px;background-color: #ECECEC;border-radius: 5px;cursor: pointer;\">删除空格</ul>\
		                       <ul class=\"removeandtrans\" style=\"float:left;padding: 3px 10px;background-color: #ECECEC;border-radius: 5px;cursor: pointer;\">删除空格并转译</ul>\
		                   </div>\
		                   <textarea placeholder=\"您可以直接请求或者将JSON数据粘贴到这里\" style="width:98%;height:300px;padding:1%;font-family: monospace;border: 1px solid #B5B8C8;background-color: rgb(250, 250, 250);border-radius: 5px;" autocomplete="off" id="edit" name="edit" ></textarea>\
	                   </div>\
	                   <div class=\"tab-item\" style=\"min-height:300px;font-size: 13px; line-height: 24px;padding: 5px;background-color:white;border-radius: 5px;display:none;\">\
	                       <div id=\"json_tree\"></div>\
	                   </div>\
                   </div>\
                </div>';
    if($(CONTAIN).find("."+WRAP).size() == 0)
    {
        $(CONTAIN).empty();
	    innerHtml(CONTAIN,html);
	    
	    $(CONTAIN).find('#input').click(function(){
		    var url = $(CONTAIN).find('#url').val();
		    if(url != '' && IsURL(url))
		    { 
		        var method =$(CONTAIN).find('#request').val();
		        var datatype = 'jsonp';
		        var param = '';
		        url = url.replace(/(^\s*)|(\s*$)/g, "");
				$.ajax({
					type: method,
					url: url,
					data:param,
					dataType: datatype,
					jsonp: "callback",
					jsonpCallback:'callback_'+Math.floor((Math.random()*100000000)+1),
					success : function(data){
					     $(CONTAIN).find('#edit').val(json2str(data));
					}, 
					error:function(data){
						 var status = data.status ;
						 var readyState = data.readyState;
						 shortmsg("不支持此接口，原因是：我们无法使用JSONP获取远程数据，请核实请求地址或检查您的参数。");
					}
				}); 
		    }
		    else
		    {
			    shortmsg("请输入正确接口地址");
		    }
	    })
	    
	    $(CONTAIN).find('.format').click(function(){
		    JSON_FORMAT($(CONTAIN).find('#edit'));
	    })
	    $(CONTAIN).find('.removewhite').click(function(){
		    RemoveWhiteSpace($(CONTAIN).find('#edit'));
	    })
	    $(CONTAIN).find('.removeandtrans').click(function(){
		    RemoveWhiteSpaceAndTrans($(CONTAIN).find('#edit'));
	    }) 
	    
	    $(CONTAIN).find(".tab-host").find(".tab").click(function(){
		    var index = $(this).index();
		    var thisid = $(this).attr("id");
		    if(thisid =='tree')
		    {
			    var val = $(CONTAIN).find('#edit').val();
			    if(val!= '')
			    { 
			        var JSON_OBJ;
			        try {
					    JSON_OBJ = eval ("(" + val + ")");
					} catch (e) {
					    
					}
				    if(IsJson(JSON_OBJ))
				    {
					    var build_tree = Build_Json_Tree(JSON_OBJ);
					    $("#json_tree").html(build_tree);
				    }
				    else
				    {
					    shortmsg("JSON格式错误");
				        return;
				    }
			    }
			    else
			    {
				    shortmsg("请输入内容");
				    return;
			    }
		    }
		    $(CONTAIN).find(".tab-host").find(".tab").removeClass("on");
		    $(CONTAIN).find(".tab-host").find(".tab").css({
			    "background-color":"transparent",
			    "color":"black"
		    });
		    $(CONTAIN).find(".tab-host").find(".tab").eq(index).addClass("on");
		    $(CONTAIN).find(".tab-host").find(".tab").eq(index).css({
			    "background-color":"#59B4FC",
			    "color":"white"
		    });
		    $(CONTAIN).find(".tab-contain").find(".tab-item").hide();
		    $(CONTAIN).find(".tab-contain").find(".tab-item").eq(index).show();
	    })
    }
}

function Build_Json_Tree(json)
{
    var html = '';
    for(var i in json){
        if (json[i] === null) {
            html += '<d onmouseover=\"$(this).css({\'background-color\':\'rgb(245, 245, 245)\'});$(this).mouseout(function(){$(this).css({\'background-color\':\'white\'})});\" style=\"border-left: dotted 1px #ccc;padding: 0 0 0 10px;display: list-item!important;\"><span style=\"cursor:pointer;font-size: 12px;color: white;margin: 0 5px 0 0;padding: 0 2px;border-radius: 3px;border: 1px solid #DF0101;background-color: rgb(246, 123, 123);\" title=\"NULL\">N</span>'+i+':'+json[i]+'</d>';
		} else if (typeof json[i] === 'string') {
		    html += '<d onmouseover=\"$(this).css({\'background-color\':\'rgb(245, 245, 245)\'});$(this).mouseout(function(){$(this).css({\'background-color\':\'white\'})});\" style=\"border-left: dotted 1px #ccc;padding: 0 0 0 10px;display: list-item!important;\"><span style=\"cursor: pointer;font-size: 12px;color:white;margin: 0 5px 0 0;padding: 0 2px;border-radius: 3px;border:1px solid #FFCC00;background-color:rgb(255, 194, 0);\" title=\"String\">S</span>'+i+':"'+json[i]+'"</d>'; 
		} else if (typeof json[i] === 'number') {
			html += '<d onmouseover=\"$(this).css({\'background-color\':\'rgb(245, 245, 245)\'});$(this).mouseout(function(){$(this).css({\'background-color\':\'white\'})});\" style=\"border-left: dotted 1px #ccc;padding: 0 0 0 10px;display: list-item!important;\"><span style=\"cursor: pointer;font-size: 12px;color:white;margin: 0 5px 0 0;padding: 0 2px;border-radius: 3px;border: 1px solid #58BAFC;background-color: rgb(0, 224, 255);\" title=\"Number\">N</span>'+i+':'+json[i]+'</d>';
		} else if (typeof json[i] === 'boolean') {
		    html += '<d onmouseover=\"$(this).css({\'background-color\':\'rgb(245, 245, 245)\'});$(this).mouseout(function(){$(this).css({\'background-color\':\'white\'})});\" style=\"border-left: dotted 1px #ccc;padding: 0 0 0 10px;display: list-item!important;\"><span style=\"cursor: pointer;font-size: 12px;color: gray;margin: 0 5px 0 0;padding: 0 2px;border-radius: 3px;border: 1px solid #EBEEF0;background-color: rgb(252, 252, 252);\" title=\"Boolean\">B</span>'+i+':'+(json[i] ? 'true' : 'false')+'</d>'; 
		} else if (typeof json[i] === 'object') {
		    html += '<d style=\"overflow:hidden;height: 24px;border-left: dotted 1px #ccc;padding: 0 0 0 10px;display: list-item!important;\"><span style=\"cursor: pointer;font-size: 12px;color: gray;margin: 0 5px 0 0;padding: 0 2px;border-radius: 3px;border: 1px solid #EBEEF0;background-color: rgb(252, 252, 252);\" onclick=\"if($(this).parent().height() == 24){$(this).parent().css({\'height\':\'100%\'});$(this).css({\'padding\':\'0 5px\'});$(this).html(\'-\');}else{$(this).parent().animate({height:\'24px\'});$(this).css({\'padding\':\'0 3px\'});$(this).html(\'+\');}\" >+</span>'+i+Build_Json_Tree(json[i])+'</d>';
		} else if (typeof json[i] === 'function') { 
			html += '<d onmouseover=\"$(this).css({\'background-color\':\'rgb(245, 245, 245)\'});$(this).mouseout(function(){$(this).css({\'background-color\':\'white\'})});\" style=\"border-left: dotted 1px #ccc;padding: 0 0 0 10px;display: list-item!important;\"><span style=\"cursor: pointer;font-size: 12px;color: gray;margin: 0 5px 0 0;padding: 0 2px;border-radius: 3px;border: 1px solid #EBEEF0;background-color: rgb(252, 252, 252);\" title=\"Function\">F</span>'+i+':'+json[i]+'</d>';
		} 
	}
	return html; 
}

function IsURL(str){
	str = str.match(/http:\/\/.+/); 
	if (str == null){  
	    return false; 
	}else{  
	    return true; 
	} 
} 

/***** 判断是否为json对象 *******
* @param obj: 对象（可以是jq取到对象）
* @return isjson: 是否是json对象 true/false
*/
function IsJson(obj)
{
   var section1 = typeof(obj) == "object";
   var section2 = Object.prototype.toString.call(obj).toLowerCase()== "[object object]" ;
   var section3;
   try {
	   section3 = !obj.length;
   }
   catch (e)
   {
	   section3 = true;
   } 
   var section4 = section2==section3;
   var isjson = section1&& section4;    
   return isjson;
}

function RemoveWhiteSpace(edit)
{
    edit.val(GetRemoveWhiteSpace(edit));
}

function RemoveWhiteSpaceAndTrans(edit)
{
    var a = GetRemoveWhiteSpace(edit).replace(/\"/g,"\\\"");
    edit.val(a);
}

function GetRemoveWhiteSpace(edit)
{
    var text = edit.val().split("\n").join(" ");
	var t = [];
	var inString = false;
	for (var i = 0, len = text.length; i < len; i++) {
		var c = text.charAt(i);
		if (inString && c === inString) {
			// TODO: \\"
			if (text.charAt(i - 1) !== '\\') {
				inString = false;
			}
		} else if (!inString && (c === '"' || c === "'")) {
			inString = c;
		} else if (!inString && (c === ' ' || c === "\t")) {
			c = '';
		}
		t.push(c);
	}
	return t.join('');
}

function JSON_FORMAT(edit)
{
    var text = edit.val().split("\n").join(" ");
	var t = [];
	var tab = 0;
	var inString = false;
	for (var i = 0, len = text.length; i < len; i++) {
		var c = text.charAt(i);
		if (inString && c === inString) {
			// TODO: \\"
			if (text.charAt(i - 1) !== '\\') {
				inString = false;
			}
		} else if (!inString && (c === '"' || c === "'")) {
			inString = c;
		} else if (!inString && (c === ' ' || c === "\t")) {
			c = '';
		} else if (!inString && c === ':') {
			c += ' ';
		} else if (!inString && c === ',') {
			c += "\n" + String.space(tab * 2);
		} else if (!inString && (c === '[' || c === '{')) {
			tab++;
			c += "\n" + String.space(tab * 2);
		} else if (!inString && (c === ']' || c === '}')) {
			tab--;
			c = "\n" + String.space(tab * 2) + c;
		}
		t.push(c);
	}
	edit.val(t.join(''));
}

String.space = function (len) {
	var t = [], i;
	for (i = 0; i < len; i++) {
		t.push(' ');
	}
	return t.join('');
};

function INIT_URL()
{
    var QUERY_VALUE = QueryRequest('value');
	var QUERY_TYPE = QueryRequest('type');
	if(QUERY_VALUE != 0){if(QUERY_VALUE.indexOf("#") > 0){QUERY_VALUE=QUERY_VALUE.split('#')[0];};};
	if(QUERY_TYPE != 0){if(QUERY_TYPE.indexOf("#") > 0){QUERY_TYPE=QUERY_TYPE.split('#')[0];};}
	var valarr = new Array(); 
	if (documentURL.indexOf("#") > 0 ){
	  var gourlarr = documentURL.split('#');
	  var gourl = gourlarr[1];
	  var govalue = gourl.split('|'); 
	  for (x in govalue)
	  {
		  var valuearr = govalue[x].split('='); 
		  valarr[valuearr[0]]=valuearr[1];
	  }  
	} 
	if (QUERY_VALUE != 0 && QUERY_TYPE != 0)
	{
		var arrtype = valarr['type'];
		var arrvalue = valarr['value'];
		if(arrtype != undefined &&  arrvalue != undefined)
		{
				initMy(valarr['type'],valarr['value']);
		} 
		else{
		    initMy(QUERY_TYPE,QUERY_VALUE);
		} 
	} 
	else{
		if(valarr['type']!= undefined && valarr['value'] != undefined)
		{
				initMy(valarr['type'],valarr['value']);
		}  
	}
}
 
function innerHtml(obj,html)
{
	var SELECT_OBJ = $('body').find(obj);
    SELECT_OBJ.append(html);
	//SELECT_OBJ.append($(html).hide().fadeIn(500));
}

/*
* setMenuStatus(type)
* 设置 obj 下 dom的attr为id的class为tag,取消其余
* 
*/
function setMenuStatus(obj,dom,attr,val,tag)
{ 
   var object = $("body").find(obj).find(dom+"["+attr+"="+val+"]");
   if (object.parent().height() <= 0)
   {
	   object.parent().height('100%');
	   object.parent().parent().find(dom).removeClass(tag);
   }
   $("body").find(obj).find(dom).removeClass(tag);
   object.addClass(tag);
}

$(function(){
    var hSscoll = $("body").find(".scollinfo").size();
    if ( hSscoll !== 0)
    {
        for (i=0;i<hSscoll;i++)
        {
          $wrap = $("body").find('.scollinfo').eq(i);
          var sHeight = $wrap.parent().height();
          var sWidth = $wrap.parent().width();
		  $wrap.find('.scollinfo-img').height(sHeight);
          $wrap.find('.scollinfo-img').width(sWidth);
		  $wrap.find('img').width(sWidth);
		  var nowimgheight = $wrap.find('img').height();
          if ( nowimgheight < sHeight)
          {
                $wrap.find('img').height(sHeight);
				$wrap.find('img').width('auto');
          }
          $wrap.find('.scollinfo-title').find("a").height(sHeight);
          $wrap.find('.scollinfo-title').find("a").width(sWidth); 
          $wrap.find('.scollinfo-title').find("a").css({"margin-top":"-"+ sHeight +"px","line-height":sHeight+"px"});
        }  
    }
})

$(function(){
    var sRandbg = $("body").find(".randbg").size();
    if ( sRandbg !== 0)
    {
		for (i=0;i<sRandbg;i++)
        {
            $("body").find(".randbg").eq(i).css("background-color","rgb("+Math.floor(Math.random()*100+10)+", "+Math.floor(Math.random()*100+20)+", "+Math.floor(Math.random()*100+30)+")");
		}
    }
})


/*
	* scoll2 卷帘特效
	* 20130116
	* wrap //定义卷帘包裹id
	* show //定义卷帘显示id
	* listItem //定义卷帘内容id
	* listheight //定义卷帘高度
	* listwidth //定义卷帘宽度
	* scolltime //定义卷帘自动播放速度 单位：毫秒
	* fx //特效 1->默认滚动  2->淡入淡出
	* subtitle //字幕开关 默认关闭 开启->true
	*/
	function initScoll2(wrap,show,listItem,listwidth,listheight,scolltime,callback,fx,subtitle)
	{ 
		scoll2(wrap,show,listItem,scolltime,listwidth,listheight,callback,fx,subtitle); 
		function scoll2(wrap,show,listItem,scolltime,listwidth,listheight,callback,fx,subtitle){
			var listnum = $(wrap).find(listItem).size();
			$(wrap).width(listwidth);
			$(wrap).height(listheight);
			$(listItem).width(listwidth);
			$(listItem).height(listheight);
			for (var l = 0; l < listnum ; l++ )
			{
				ResizeImage($(listItem).find('img').eq(l),listwidth,listheight); 
			} 
			$(listItem).find('.scoll2list-up-img').width(listwidth);
			$(listItem).find('.scoll2list-up-img').height(listheight);
			$(listItem).find('.scoll2list-up-des').width(listwidth-10);
			$(listItem).find('.scoll2list-up-des').height(listheight);
			$(show).width(listwidth*listnum);
			$(show).height(listheight);
			var appendHtml = '<div class="scoll2Control"><ul class="scoll2left"> </ul><ul class="scoll2right"> </ul></div><div style="z-index:1;position: absolute;bottom:24px;right:0; " class="scoll2Pos"></div>';
			if (!subtitle) {
			   $(listItem).find('.scoll2list-up-des').hide();
				appendHtml = '<div class="scoll2Control"><ul class="scoll2left"> </ul><ul class="scoll2right"> </ul></div><div style="z-index:1;position: absolute;bottom:0;right:0; " class="scoll2Pos"></div>';
			}
			
			$(wrap).prepend(appendHtml); 
			$(wrap).find(".scoll2Control ul").css({
							"margin-top":(listheight/2)+"px" 
		   }); 
		   initPos(0);
		   setStyle();
		   var callback = setTimeout("this.outScoll2();",scolltime);
			$(wrap).mouseover(function(){
				clearTimeout(callback);
			});  
			$(wrap).mouseleave(function(){
				callback = setTimeout("this.outScoll2();",scolltime);
			}); 
			$(wrap).find(".scoll2right").click(function(){
				scoll2left();
				clearTimeout(callback);
			}); 
			$(wrap).find(".scoll2left").click(function(){
				scoll2right();
				clearTimeout(callback);
			}); 
			this.outScoll2 = function (){
				scoll2left(); 
				callback = setTimeout("this.outScoll2();",scolltime);
			}

			function scoll2left() {
				nowmleft = $(show).css("margin-left");
				nowmleft = nowmleft.split("p");
				var nowmleft = Number(nowmleft[0]);
				if(!(/^[-]?\d+$/.test(nowmleft)))//过滤因点击太快导致的问题
				{
					return false;
				}
				if( nowmleft == listwidth*( 1 - listnum ))
			   {
					i = 0;
				}
				else
				{
					i = nowmleft - listwidth;
				}
				scoll2show(i);
			}

			function scoll2right(){
				nowmleft = $(show).css("margin-left");
				nowmleft = nowmleft.split("p");
				var nowmleft = Number(nowmleft[0]);
				if(!(/^[-]?\d+$/.test(nowmleft)))//过滤因点击太快导致的问题
				{
					return false;
				}
				if( nowmleft == 0)
				{
					i = listwidth*( 1 - listnum );
				}
				else
				{
					i = nowmleft + listwidth;
				}
				scoll2show(i);
			}

			function scoll2show(i)
			{
				var nowpos = Math.abs(i/listwidth);
				if (fx == 1) {
					$(show).animate({marginLeft:i+"px"},"fast");
				}
			   else{
				 $(show).css({
							"margin-left":i+"px" 
				  }); 
				  $(wrap).find(listItem).find(".scoll2list-up").hide(); 
				   $(wrap).find(listItem).eq(nowpos).find(".scoll2list-up").fadeIn(); 
			   } 
				initPos(nowpos);
			}
		
		   function initPos(pos)
		   {
			var posnum = $(wrap).find(".scoll2Pos").find("ul").size();
			if (posnum == listnum ) {
				 $(wrap).find(".scoll2Pos").find("ul").css({
							"color":"gray" 
				  });
				$(wrap).find(".scoll2Pos").find("ul").eq(pos).css({
							"color":"rgb(0, 163, 255)" 
				  });
			}
			  else{
				 for (i=1;i<= listnum; i++)
				  {
						 $(wrap).find(".scoll2Pos").append("<ul>•</ul>");
				  }
				  $(wrap).find(".scoll2Pos").find("ul").mouseenter(function(){
			              var indexof = $(this).index();
			              var marginLeft = indexof * listwidth;
			              scoll2show('-'+marginLeft);
			      });
				  $(wrap).find(".scoll2Pos").find("ul").css({
							"color":"gray",
							"cursor":"pointer",
							"margin":"0 3px",
							"height":"20px",
							"width":"20px",
							"line-height":"20px",
							"font-size":"40px",
							"font-family": "sans-serif",
							"float": "left"
				  });
				  initPos(pos);
			  }
		   }

		   function setStyle()
		   {
			  $(wrap).css({
				  "overflow":"hidden",
				  "position":"relative"
			  });
			  $(wrap).find(show).css({
				  "overflow":"hidden",
				  "position":"absolute"
			  });
			  $(wrap).find(show).find(listItem).css({
				  "overflow":"hidden",
				  "float":"left"
			  });
			  $(wrap).find(show).find(listItem).find(".scoll2list-up").find("ul").css({
				  "text-align":"center"
			  });
			  $(wrap).find(show).find(listItem).find(".scoll2list-up-img").css({
				  "overflow":"hidden"
			  });  
			  $(wrap).find(show).find(listItem).find(".scoll2list-up-des").find('a').css({
				  "color":"white"
			  });  
			  $(wrap).find(show).find(listItem).find(".scoll2list-up-des").css({
					"line-height":"18px",
					"padding":"5px",
					"color":" white",
					"background-color":"rgb(0, 0, 0)",
					"filter":" progid:DXImageTransform.Microsoft.Alpha(opacity=80)",
					"-moz-opacity":" 0.8",
					"opacity":" 0.8",
					"position":" absolute",
					"font-size":" 16px",
					"text-align":" center",
					"height":" 18px",
					" overflow":"hidden",
					"white-space":" nowrap",
					"text-overflow":"ellipsis",
					"-o-text-overflow":" ellipsis",
					"-icab-text-overflow":" ellipsis",
					"-khtml-text-overflow":" ellipsis",
					"-moz-text-overflow":" ellipsis",
					"-webkit-text-overflow":" ellipsis",
					"margin-top":" -28px"
			  });
			  $(wrap).find(".scoll2Control").find("ul").css({
					"position":" absolute", 
                    "background-image": "url(http://www.gogomaster.com/templets/default/images/scoll24.png)",
					"width":"45px",
					"z-index":"99", 
					"cursor":"pointer",
					"color":" rgb(235, 235, 235)",
					"line-height":" 32px",
					"height":"45px",
					"text-align":" center", 
					"filter":" progid:DXImageTransform.Microsoft.Alpha(opacity=80)",
					"-moz-opacity":" 0.8",
					"opacity":" 0.8"
			  });
			  $(wrap).find(".scoll2Control").find(".scoll2left").css({
				  "left":"0",
				  "float":"left",
				  "border-radius":"0 20px 20px 0"
			  });
			  $(wrap).find(".scoll2Control").find(".scoll2right").css({
				  "right":"0",
				  "float":"right",
				  "background-position":" left -45px",
				  "border-radius":" 20px 0 0 20px "
			  }); 
		   }
		}
	}

function ResizeImage(objImage,maxWidth,maxHeight) {  
	ResizeImage2(objImage,maxWidth,maxHeight); 
}  
var IMG_SQ = 0;
function ResizeImage2(objImage,maxWidth,maxHeight) {
	var margin = 0;
	var objImg = $(objImage);
    var img = new Image();
	img.src =objImg.attr("src") ;
	img.rname = "iChuk_IMG_"+String(IMG_SQ);
	objImg.parent().css({
		"background-color":"white"
	})
	objImg.addClass(img.rname);
	objImg.hide();
	IMG_SQ ++ ;
	img.maxwidth = maxWidth;
	img.maxheight = maxHeight;
	maxWidth = maxWidth - margin;
	maxHeight = maxHeight - margin;
	img.onload= function (){
		try{  
		    var now_height;
			var now_width;
			var owidth = this.width;
			var oheight = this.height;
		    if(this.maxwidth>0){ 
		        if(!(owidth == 32 && oheight ==32)){ 
					  if(oheight< this.maxheight){
						  this.height = this.maxheight;
						  var fixwidth = (this.maxheight/oheight)*owidth;
						  this.width = (this.width < this.maxwidth)?this.maxwidth:fixwidth;
					  }else{
					      this.width = this.maxwidth;
					      var fixheight = (this.maxwidth/owidth)*oheight;
						  this.height = (this.height < this.maxheight)?this.maxheight:fixheight;
					  }					  
					  now_height = this.height;
			          now_width = this.width;
		        }
		        else
		        {
				    now_height = owidth;
				    now_width = owidth;
		        }
				margin_top = maxHeight + margin - now_height;
				margin_left = maxWidth + margin - now_width;
				 
				$("."+this.rname).css({ 
				    "margin": (margin_top/2)+"px "+(margin_left/2)+"px",
				    "width":now_width+"px",
				    "height":now_height+"px"
				});
				$("."+this.rname).parent().css({
				    "overflow": "hidden",
				    "width": maxWidth+"px",
				    "height": maxHeight+"px",
				    "display": "block"
				});
				$("."+this.rname).fadeIn('fast',function(){
					$(this).parent().css({
						"background-color": "black"
					})
				});
		    }
		}
		catch(err)
		{
	
		} 
	} 
}

 
function SET_MENU(id)
{
	$('.ichuk-menu').find('.content').find("a").removeClass('on');
    $('.ichuk-menu').find('.content').find("a[reldata="+id+"]").addClass('on');
}

/*
* GET_TYPE_LIST(typeid)
* 根据typeid 获取栏目信息json
*
*/
function GET_TYPE_LIST(typeid)
{   
  var SELECT_OBJ = $('body').find('#ajaxlist');  
  var pagesize = Number(SELECT_OBJ.attr('rel-pagesize')); 
  var page = Number(SELECT_OBJ.attr('rel-page'));
  var nowsize = Number(SELECT_OBJ.attr('rel-nowsize'));
  var total = Number(SELECT_OBJ.attr('rel-total'));
  var JS_URL_QUERY = PARASE_URL();
  var url = "http://api.ichuk.com/v1/?"+JS_URL_QUERY['query']; 
  $.ajax({
		 type: "get",
		 url: url,
		 data:{'accesstoken':'web:20130821_php','function':'get_type_list','openid':'1','typeid':typeid,'page':page,'pagesize':pagesize},
		 dataType: "jsonp",
		 jsonp: "callback",
		 jsonpCallback:'callback_'+Math.floor((Math.random()*100000000)+1),
		 success : function(data){ 
			 var rel_arr = data[0][0]['main'];
			 if (rel_arr != undefined)
			 {
				 var html = '';
				 if (total == 0)
				 {
					 total= data[0][0]['total'];
					 SELECT_OBJ.attr('rel-total',total);
				 }
				 $.each(rel_arr, function(commentIndex,data) {
					 var litpic = data['litpic']; 
					 if (litpic == null)
					 {
						 litpic = 'http://www.ichuk.com/images/defaultpic.gif';
					 }
					 litpic = litpic.replace("_w600.jpg","");
					 html += '<li class=\"ajaxlistItem\">';
					 html += '<div class=\"ajaxlistItemMedia\">';
					 html += '<a href=\"'+data['htmlurl']+'\" title=\"'+data['title']+'\" style=\"width:200px;height:146px;display:block;overflow:hidden;\" target=\"_blank\"><img src=\"'+litpic+'\" alt=\"'+data['title']+'\" onload=\"ResizeImage(this,200,146);\"></img></a>';
					 html += '</div>'; 
					 html += '<div class=\"ajaxlistItemInfo\">';
					 html += '<a href=\"'+data['htmlurl']+'\" class=\"title textnowrap\" target=\"_blank\">'+data['title']+'</a>';
					 html += '<a href=\"'+data['htmlurl']+'\" class="info" target=\"_blank\">'+data['description']+'...[查看全文]</a>'; 
					 html += '<div class=\"ajaxlistItemEco\">';
					 html += '<ul class="info">阅读:'+data['click']+'</ul>';
					 html += '<ul class="sysinfo">发表于'+data['pubdate']+'</ul>';
					 html += '</div>';
					 html += '</div>';
					 html += '</li>';
				 })
				 var detSIze = Number(SELECT_OBJ.find(".ajaxlistItem").size());
				 var culSize = (page-1)*pagesize + nowsize;
				 if ( detSIze == culSize)
				 { 
					 SELECT_OBJ.parent().find('.WaitingHtml').detach();
					 SELECT_OBJ.append($(html).hide().fadeIn(500)); 
					 page++; 
					 SELECT_OBJ.attr('rel-page',page);
					 $(window).scroll(function(){  
					   var scollHeight = $(document).scrollTop();
					   var standHeight = $(document).height()-$(window).height()-300;
					   if(scollHeight >= standHeight)
					   {
						   GET_TYPE_LIST(typeid);
					   }
					 });
				 }
			 }
			 else{ 
				 SELECT_OBJ.parent().find('.WaitingHtml').text("已经没有啦~");
			 }
			   
		 },
		 beforeSend: function(){
			 var waitingsize = SELECT_OBJ.parent().find('.WaitingHtml').size();
			 if ( waitingsize <= 0)
			 {
				 var waiting = '<div class="WaitingHtml" style="position: relative;width: 100%;font-size:16px;color:black;padding: 10px 0;background-color: rgb(223, 223, 223);text-align: center;">正在努力加载……</div>';
				 SELECT_OBJ.parent().append($(waiting).hide().fadeIn(100));
			 } 
		 },
		 error:function(data){
			 var status = data.status ;
			 var readyState = data.readyState; 
		 }
	});   
}

function QueryRequest(sName)
{

  /*
   get last loc. of ?
   right: find first loc. of sName
   +2
   retrieve value before next &
  
  */
  
  var sURL = new String(window.location);
  var sURL = document.location.href;
  var iQMark= sURL.lastIndexOf('?');
  var iLensName=sName.length;
  
  //retrieve loc. of sName
  var iStart = sURL.indexOf('?' + sName +'=') //limitation 1
  if (iStart==-1)
        {//not found at start
        iStart = sURL.indexOf('&' + sName +'=')//limitation 1
                if (iStart==-1)
                   {//not found at end
                    return 0; //not found
                   }   
        }
        
  iStart = iStart + + iLensName + 2;
  var iTemp= sURL.indexOf('&',iStart); //next pair start
  if (iTemp ==-1)
                {//EOF
                iTemp=sURL.length;
                }  
  return sURL.slice(iStart,iTemp ) ;
  sURL=null;//destroy String
}

function PARASE_URL()
{
  var url = document.baseURI || document.URL;
  var parse = url.match(/^(([a-z]+):\/\/)?([^\/\?#]+)\/*([^\?#]*)\??([^#]*)#?(\w*)$/i);
  var result = {
		'schema': parse[2],
		'host': parse[3],
		'path': parse[4],
		'query': parse[5],
		'anchor': parse[6]
  };
  return result;
}

/*
* INIT_USERINFO();
* 初始化登录信息
*/
function INIT_USERINFO(){
    var mid = checkLogin();
	if(mid>0){
		var url = "http://api.ichuk.com/v1/";
		$.ajax({
			 type: "GET",
			 url: url,
			 data:{'accesstoken':'web:20130821_php','function':'userinfo','openid':'1','mid':mid,'math':Math.random()*10},
			 dataType: "jsonp",
			 jsonp: "callback", 
			 jsonpCallback:'callback_'+Math.floor((Math.random()*100000000)+1),
			 success : function(data){ 
				 innnerInfo(data[0]);
			 },
			 error:function(data){
				 var status = data.status ;
				 var readyState = data.readyState; 
			 }
		 });
	} 

	function innnerInfo(obj)
	{
		$info_arr = obj[0][0];
		$uname = $info_arr['uname'];
		$umoney = $info_arr['scores'];
		$uface = $info_arr['face'];
		if ($uface == ''||$uface == undefined)
		{
           $uface = 'http://www.ichuk.com/member/templets/images/nopic.gif';
		}else{
			if ($uface.indexOf("http://") < 0)
			{
				$uface = "http://www.ichuk.com"+$uface;
			}
		}
		$innerHtml = '<a class="infoimg"><img title="'+$uname+'" orgdata="'+$uface+'" src="http://www.ichuk.com/images/loading.gif" onload="LOAD_IMG($(this),\'orgdata\');" width=25 height=25 /></a><a class="infouname">'+$uname+'</a><a class="infologout" onclick="AjaxLogout();" >退出</a></ul>';
		$("#UserLogin").empty();
		$("#UserLogin").append($($innerHtml).hide().fadeIn(200));
	}
}
 

/*
* checkLogin();
* 判断登录，若return > 则为登录
*/
function checkLogin()
{
	var islogin = getCookie("DedeUserID");
	islogin =Number(islogin);
	if (islogin >= 0)
	{
	   return islogin;
	}
	else
	{
		return 0;
	}
}

/*
* shortmsg(type)
* 快速通知
* 
*/
function shortmsg(string,callback,auto)
{  
     var automiss = 5000;
	 INIT_ALERT_FRAME(); 
	 var object = $('.SystemAlertFrame');
	 var html ='';
     html += '<div style=\"text-align:center;font-size:16px;color: rgb(236, 0, 0);word-break: break-all;padding: 0 10px;\">';
	 html += string;
     html += '</div>';
	 object.find('.SystemAlertFrameMain').empty();
	 object.find('.SystemAlertFrameMain').append(html);  
	 $(".showMsg").find("#showMegCancle").click(function(){
	     $(".showMsg").detach();
	 }) 
	 if( auto == 0)
	 {
	      $(".showMsg").find("#showMegConfirm").click(function(){
			  if( callback == null)
			  { 
				 setTimeout("this.detachMsg()",automiss); 
			  }
				 else
			  {
                 callback();
			  }
	          
	      })
	 }
	 else
	 {
		if( callback == null)
		{ 
		   setTimeout("this.detachMsg()",automiss);
		}
		else
		{
		   callback();
		}
	 }

    this.detachMsg = function() {
        object.detach(); 
    }

}

//初始化对话窗口 2.0
//tag->SystemAlertFrame
function INIT_ALERT_FRAME()
{
	if ($('body').find('.SystemAlertFrame').size() ==0 )
    {
		var html = '<div class="SystemAlertFrame" style="display:none;">';
		html += '<ul class="title">';
		html += '<li id="showMegTitle"></li>';
		html += '<li title=\"关闭\" style=\"float: right;margin: 0 10px;font-size: 30px;cursor:pointer;\" id="showMegCancle">×</li>';
		html += '</ul>';
		html += '<ul class="SystemAlertFrameMain" style="line-height: 24px;padding: 5px 0;">'; 
		html += '</ul>';   
		html += '</div>'; 
		$("body").append(html) ; 
		var object = $('.SystemAlertFrame');
		object.css({
		"-webkit-background-clip": "padding-box",
		"-moz-background-clip": "padding",
		"background-clip": "padding-box",
		"-webkit-border-radius": "2px",
		"-moz-border-radius": "2px",
		"border-radius": "2px",
		"background": "white",
		"-webkit-box-shadow": "0 0 8px 0 rgba(0, 0, 0, 0.4)",
		"-moz-box-shadow": "0 0 8px 0 rgba(0, 0, 0, 0.4)",
		"box-shadow":" 0 0 8px 0 rgba(0, 0, 0, 0.4)",
		"z-index":" 9999", 
		"width":" 380px", 
		"background-color":" white",
		"left":" 35%",
		"top":"20%",
		"position":"fixed"
		});
		object.fadeIn(); 
		object.find("#showMegCancle").click(function(){
		  object.detach();
		}) 
    } 
}

function SHOW_DIALOG(type){
      if (type == 'login')
      {
		  var html = '<div class="SHOW_LOGIN_FRAME" style="font-family: Microsoft Yahei;margin: 100px auto;padding: 10px;overflow: hidden;background-color: white;width:300px;"><ul style="font-size: 20px;border-bottom: 2px solid #ccc;padding: 0 0 10px 0;" class="SHOW_LOGIN_TITLE">登录</ul><ul class="SHOW_LOGIN_MAIN"><form name="form1" method="POST" action="index_do.php"><input type="hidden" name="fmdo" value="login"><input type="hidden" name="dopost" value="login"><input type="hidden" name="gourl" value=""><ul class="commen-login" style="margin: 10px 0;"><li style="margin: 10px 0;font-size: 14px;"> <span style="float:left;display: block;width: 60px;">用户名：</span><input style="color: #ABABAB;cursor: text; font-size: 12px;height: 20px;line-height: 20px;width: 150px;" id="txtUsername" class="text login_from" type="text" name="userid"></li><li style="margin: 10px 0;font-size: 14px;"> <span style="float:left;display: block;width: 60px;">密&nbsp;&nbsp;&nbsp;码：</span><input style="color: #ABABAB;cursor: text; font-size: 12px;height: 20px;line-height: 20px;width: 150px;" id="txtPassword" class="text login_from2" type="password" name="pwd"></li><li style="margin: 10px 0;font-size: 14px;"> <span style="float:left;display: block;width:60px;">验证码：</span><input style="color: #ABABAB;cursor: text; font-size: 12px;height: 20px;line-height: 20px;width: 100px;" id="vdcode" class="text login_from3" type="text" style="width: 50px; text-transform: uppercase;" name="vdcode"><img id="vdimgck" align="absmiddle" onclick="this.src=this.src+\'?\'" style="cursor: pointer;" alt="看不清？点击更换" src="http://www.ichuk.com/include/vdimgck.php" /> </li><li><span style="float:left;display: block;width:60px;"> &nbsp; </span><button id="btnSignCheck" style="margin: 0 10px 0 0;padding: 1px 10px;background-color: rgb(67, 117, 199);border: 1px solid rgb(0, 69, 175);border-radius: 5px;letter-spacing: 1px;overflow: hidden;color: rgb(230, 230, 230);cursor: pointer;font-family: Microsoft yahei;font-size: 18px;" class="button5" type="button" onclick="AjaxLogin();">登&nbsp;录</button><a style="margin: 10px 0;font-size: 14px;" target="_blank" href="http://www.ichuk.com/member/resetpassword.php">忘记密码？</a> </li></ul><ul class="partner-login" style="border-top: 1px dotted #ccc;text-align: center;padding: 10px 0;font-size: 14px;clear: both;"><li class="title">你也可以使用合作账号登录</li> <li class="contain" style="padding-left: 90px; margin: 10px 0 0 0;overflow: hidden;"><a style="width: 32px;height: 24px;background: url(http://www.ichuk.com/templets/default/images/sprite.PNG) -300px 0;float:left;margin-right:10px;display: block;" onclick="Partner_Login(\'qq\');" title="QQ登陆" alt="QQ登陆" class="qq"></a><a style="width: 32px;height: 24px;background: url(http://www.ichuk.com/templets/default/images/sprite.PNG) -300px -25px;float:left;margin-right:10px;display: block;" onclick="Partner_Login(\'sina\');" title="微博登陆" alt="微博登陆" class="sina"></a><a style="float:left;margin-right:10px;width: 32px;height: 24px;background: url(http://www.ichuk.com/templets/default/images/sprite.PNG) -300px -50px;display: block;" onclick="Partner_Login(\'renren\');" title="人人登陆" alt="人人登陆" class="renren"></a></li></ul><ul style="border-top:1px dotted #ccc;padding:5px 0;text-align:center;">还没有iChuk帐号？<a href="http://www.ichuk.com/member/index_do.php?fmdo=user&dopost=regnew" target="_blank">立即注册</a></ul></form></ul></div>';
		  INIT_FRAME(html);
      }

	  function INIT_FRAME(DATA)
	  { 
         var sNum = $("body").find(".SHOW_DIALOG").size();  
		 if( sNum == 0)
	     {   
			 $("body").append('<div class="SHOW_DIALOG_MASK" style="top: 0;background-color: black;width: 100%;position: fixed;height: 100%;filter: alpha(opacity=90);-moz-opacity: .9;opacity: .9;z-index: 65535;"></div><div style="left: 50%;top: 50%;position: fixed;width: 1000px;margin: -275px 0 0 -500px;z-index: 65536;" class="SHOW_DIALOG"><ul style="width: 30px;height: 30px;position: absolute;background: url(http://www.ichuk.com/templets/default/images/sprite.PNG) -326px -616px;margin-top: -10px;margin-left: 980px;cursor: pointer;" class="clzShowArc" title="关闭" onclick="clzShowArcFrame()"></ul><ul class="SHOW_DIALOG_MAIN">'+DATA+'</ul></div>');
		 }
		 else{
		     $("body").find(".SHOW_DIALOG").find(".SHOW_DIALOG_MAIN").append(DATA);
		 }
		 $("body").find(".SHOW_DIALOG_MASK").fadeIn();
         $("body").find(".SHOW_DIALOG").fadeIn();    
         $(".SHOW_DIALOG_MASK").click(function(){
		       $("body").find(".SHOW_DIALOG").find(".SHOW_DIALOG_MAIN").empty();
			   $("body").find(".SHOW_DIALOG_MASK").fadeOut();
			   $("body").find(".SHOW_DIALOG").fadeOut();
		 });
		 $(".clzShowArc").click(function(){
		       $("body").find(".SHOW_DIALOG").find(".SHOW_DIALOG_MAIN").empty();
		   $("body").find(".SHOW_DIALOG_MASK").fadeOut();
		   $("body").find(".SHOW_DIALOG").fadeOut();
		 });
	  } 
  }

  function Partner_Login(type) { 
	 var url="";
	 switch(type)
	 {
		 case "qq":
			 url="http://www.ichuk.com/oauth/qq/login.php";
		     iwidth=631;
             iheight=547;
		 break;
		 case "sina":
			 url="http://www.ichuk.com/oauth/sina/index.php";
		     iwidth=631;
             iheight=547;
		 break;
		 case "renren":
			 url="http://www.ichuk.com/oauth/renren/index.php";
		     iwidth=631;
             iheight=547;
		 break;
		 default:
			 url="";
		     iwidth=631;
             iheight=547;
		 break;
	 }
	 if(url!="")
	 { 
		 openwindow(url,"uninLogin",iwidth,iheight);
		 document.domain='ichuk.com'; 
	 }

	 function openwindow(url,name,iWidth,iHeight)
	 {
		var url; //转向网页的地址;
		var name='pop_login'; //网页名称，可为空;
		var iWidth; //弹出窗口的宽度;
		var iHeight; //弹出窗口的高度;
		var iTop = (window.screen.availHeight-30-iHeight)/2; //获得窗口的垂直位置;
		var iLeft = (window.screen.availWidth-10-iWidth)/2; //获得窗口的水平位置;
		var sub_win = window.open(url,name,'height='+iHeight+',,innerHeight='+iHeight+',width='+iWidth+',innerWidth='+iWidth+',top='+iTop+',left='+iLeft+',toolbar=no,menubar=no,scrollbars=auto,resizeable=yes,location=yes,status=no'); 
	 }
  }


  function AjaxLogout()
  {
      var url = "http://api.ichuk.com/v1/";
		  $.ajax({
			 type: "POST",
			 url: url,
			 data:{'accesstoken':'web:20130821_php','function':'check_exit','openid':'1'},
			 dataType: "jsonp",
			 jsonp: "callback",
			 jsonpCallback:'callback_'+Math.floor((Math.random()*100000000)+1),
			 success : function(data){ 
				 var rel_msg = data[0][0]['msg'];
				 if (rel_msg == '成功登出')
				 {
                     window.location.reload();
				 }
				 else{
				     alert(rel_msg);
				 }
			 },
			 error:function(data){
				 var status = data.status ;
				 var readyState = data.readyState; 
			 }
		});
  }

  function AjaxLogin()
  {
      var userid = $('#txtUsername').val();
      var pwd = $('#txtPassword').val();
	  var vdcode = $('#vdcode').val();
	  if(userid == ''){
		 alert('请填写用户名');
	  }else{
	      if (pwd == '')
	      {
			  alert('请填密码');
	      }
		  else {
              if (vdcode==''){
			      alert('请填验证码');
			  }
			  else{
			      CheckLogin(userid,pwd,vdcode);
			  }
		  }
	  }

	  function CheckLogin(u,p,v)
	  {    
		  var url = "http://api.ichuk.com/v1/";
		  $.ajax({
			 type: "POST",
			 url: url,
			 data:{'accesstoken':'web:20130821_php','function':'check_login','openid':'1','userid':u,'pwd':p,'vdcode':v},
			 dataType: "jsonp",
			 jsonp: "callback",
			 jsonpCallback:'callback_'+Math.floor((Math.random()*100000000)+1),
			 success : function(data){ 
				 var rel_msg = data[0][0]['msg'];
				 if (rel_msg == '成功登录')
				 {
                     window.location.reload();
				 }
				 else{
				     alert(rel_msg);
				 }
			 },
			 error:function(data){
				 var status = data.status ;
				 var readyState = data.readyState; 
			 }
		});
	  }
  }

  //写cookies
function setCookie(name,value)
{
    var Days = 30; //此 cookie 将被保存 30 天
    var exp  = new Date();    //new Date("December 31, 9998");
    exp.setTime(exp.getTime() + Days*24*60*60*1000);
    document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
 
}

//读取cookies
function getCookie(name)
{
   var arr = document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));
   if(arr != null) return unescape(arr[2]); return null;
}
//删除cookie
function delCookie(name)
{
    var exp = new Date();
    exp.setTime(exp.getTime() - 1);
    var cval=getCookie(name);
    if(cval!=null) document.cookie= name + "="+cval+";expires="+exp.toGMTString();
}

/*
* LOAD_IMG(obj,tag)
* 加载图片资源并替换obj src属性
* 直接返回图片URL
*/
function LOAD_IMG(obj,tag)
{
  var object = obj;
  var src = object.attr(tag);
  src = escape(src);
  var req_url = "http://api.ichuk.com/v1/?callback=success_callback&accesstoken=web:20130821_php&function=load_img_url&src="+src+"&openid=1&math="+Math.random()*10;
  var now_src = object.attr('src');
  if (now_src == 'http://www.ichuk.com/images/loading.gif')
  {
	  object.attr('src',req_url);
  } 
}

/*
* LOAD_IMG2(obj,tag)
* 加载图片资源并替换obj src属性
* 延迟加载
*/
function LOAD_IMG2(obj,tag)
{
  var object = obj;
  var src = object.attr(tag); 
  var now_src = object.attr('src');
  if (src == now_src)
  {
	  return;
  }
  else{
      var scollHeight = $(document).scrollTop();
	  var standHeight = object.offset().top;
	  if (scollHeight == 0)
	  {
		  var windowHeight = window.screen.availHeight;
		  if (standHeight < windowHeight)
		  {
			 if (now_src == 'http://www.ichuk.com/images/loading.gif')
			 {
				 object.attr('src',src);
			 } 
		  }
	  }
	  else if(scollHeight >= standHeight)
	  {
		 if (now_src == 'http://www.ichuk.com/images/loading.gif')
		 {
			 object.attr('src',src);
		 } 
	  } 
  } 
}

/*
* AJAX_LIST_JSON()
*
*/
function AJAX_LIST_JSON(tid,flag,tag,model,orderway,orderby){
    var url = "http://api.ichuk.com/v1/";
	$.ajax({
		type: "POST",
		url: url,
		data:{'accesstoken':'web:20130821_php','function':'get_flag_list','openid':'1','tid':tid,'flag':flag,'pagesize':10,'page':1,'orderway':orderway,'orderby':orderby},
		dataType: "jsonp",
		jsonp: "callback",
		jsonpCallback:'callback_'+Math.floor((Math.random()*100000000)+1),
		success : function(data){ 
		 var datalist = data[0]['main'];
		 var html = '';
		 var indexof = 1;
		 $.each(datalist, function(commentIndex,data) {
			 var litpic = data['litpic']; 
			 if (litpic == null)
			 {
				 litpic = 'http://www.ichuk.com/images/defaultpic.gif';
			 }
			 litpic = litpic.replace("_w600.jpg","");
			 if (model == 'iChukSide')
			 {
				 html += '<div class=\"listitem\">';
				 html += '<div class=\"listicon icon_'+indexof+'\"></div>';
				 html += '<div class=\"main\">';
				 html += '<a href=\"'+data['htmlurl']+'\" target=\"_blank\">'+data['title']+'</a>';
				 html += '</div>';
				 html += '</div>';
			 }
			 else if (model == 'AJAXLIST')
			 {
                 html += '<li class=\"ajaxlistItem\">';
				 html += '<div class=\"ajaxlistItemMedia\">';
				 html += '<a href=\"'+data['htmlurl']+'\" title=\"'+data['title']+'\" style=\"width:200px;height:146px;display:block;overflow:hidden;\" target=\"_blank\"><img src=\"'+litpic+'\" alt=\"'+data['title']+'\" onload=\"ResizeImage(this,200,146);\"></img></a>';
				 html += '</div>'; 
				 html += '<div class=\"ajaxlistItemInfo\">';
				 html += '<a href=\"'+data['htmlurl']+'\" class=\"title textnowrap\" target=\"_blank\">'+data['title']+'</a>';
				 html += '<a href=\"'+data['htmlurl']+'\" class="info" target=\"_blank\">'+data['description']+'...[查看全文]</a>'; 
				 html += '<div class=\"ajaxlistItemEco\">';
				 html += '<ul class="info">阅读:'+data['click']+'</ul>';
				 html += '<ul class="sysinfo">发表于'+data['pubdate']+'</ul>';
				 html += '</div>';
				 html += '</div>';
				 html += '</li>';
			 }
			
			 indexof ++;
		 })
		 $(tag).append($(html).hide().fadeIn(200));
		},
		error:function(data){
		 var status = data.status ;
		 var readyState = data.readyState; 
		}
	});
}

/*
* 初始化 TABVIEW
*
*/
function INIT_TABVIEW()
{
   if( $('body').find('.tabview').size() > 0)
   {
       $('body').find('.tabview').find('.tabbutton').click(function(){
	      var index = $(this).index(); 
          $(this).parent().parent().find('.tabbutton').removeClass('on');
          $(this).parent().parent().find('.tabbutton').eq(index).addClass('on');
		  $(this).parent().parent().find('.tabcontentlist').eq(index).addClass('on');
		  $(this).parent().parent().find('.tabcontentlist').hide();
		  $(this).parent().parent().find('.tabcontentlist').eq(index).fadeIn();
	   });
   }
}

/*
* 初始化JSON解析功能框架
*/
function INIT_JSON_FRAME()
{
	var MAIN_FRAME='#main';
	if ($(MAIN_FRAME).size()==1)
	{
	    $(MAIN_FRAME).empty();
	    var html='';
	    html +='<div class=\"json-frame-wrap\" style\"overflow:hidden;\">';
	    html +='<div style=\"float:left;width:50%;text-align:center;">';
	    html +='<textarea name=\"origine\" style=\"width:100%;height:100%;border:none;border-radius:0;\">input json string</textarea>';
	    html +='</div>';
	    html +='<div style=\"float:left;width:50%;text-align:center;\">';
	    html +='<textarea name=\"result\" style=\"width:100%;height:100%;border:none;border-radius:0;\">result will be writen here</textarea>';
	    html +='</div>';
	    html +='</div>';
	    $(MAIN_FRAME).append(html);
	    $(MAIN_FRAME).find('textarea[name=origine]').bind('blur', function() {  //采用几个事件来触发（已增加鼠标粘贴事件） 
		   var value = $(this).val();
		    alert(value);
        });
	}
}

/**
*
*  Base64 encode / decode 
*
*/
 
function Base64() {
 
	// private property
	_keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
 
	// public method for encoding
	this.encode = function (input) {
		var output = "";
		var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
		var i = 0;
		input = _utf8_encode(input);
		while (i < input.length) {
			chr1 = input.charCodeAt(i++);
			chr2 = input.charCodeAt(i++);
			chr3 = input.charCodeAt(i++);
			enc1 = chr1 >> 2;
			enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
			enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
			enc4 = chr3 & 63;
			if (isNaN(chr2)) {
				enc3 = enc4 = 64;
			} else if (isNaN(chr3)) {
				enc4 = 64;
			}
			output = output +
			_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +
			_keyStr.charAt(enc3) + _keyStr.charAt(enc4);
		}
		return output;
	}
 
	// public method for decoding
	this.decode = function (input) {
		var output = "";
		var chr1, chr2, chr3;
		var enc1, enc2, enc3, enc4;
		var i = 0;
		input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
		while (i < input.length) {
			enc1 = _keyStr.indexOf(input.charAt(i++));
			enc2 = _keyStr.indexOf(input.charAt(i++));
			enc3 = _keyStr.indexOf(input.charAt(i++));
			enc4 = _keyStr.indexOf(input.charAt(i++));
			chr1 = (enc1 << 2) | (enc2 >> 4);
			chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
			chr3 = ((enc3 & 3) << 6) | enc4;
			output = output + String.fromCharCode(chr1);
			if (enc3 != 64) {
				output = output + String.fromCharCode(chr2);
			}
			if (enc4 != 64) {
				output = output + String.fromCharCode(chr3);
			}
		}
		output = _utf8_decode(output);
		return output;
	}
 
	// private method for UTF-8 encoding
	_utf8_encode = function (string) {
		string = string.replace(/\r\n/g,"\n");
		var utftext = "";
		for (var n = 0; n < string.length; n++) {
			var c = string.charCodeAt(n);
			if (c < 128) {
				utftext += String.fromCharCode(c);
			} else if((c > 127) && (c < 2048)) {
				utftext += String.fromCharCode((c >> 6) | 192);
				utftext += String.fromCharCode((c & 63) | 128);
			} else {
				utftext += String.fromCharCode((c >> 12) | 224);
				utftext += String.fromCharCode(((c >> 6) & 63) | 128);
				utftext += String.fromCharCode((c & 63) | 128);
			}
 
		}
		return utftext;
	}
 
	// private method for UTF-8 decoding
	_utf8_decode = function (utftext) {
		var string = "";
		var i = 0;
		var c = c1 = c2 = 0;
		while ( i < utftext.length ) {
			c = utftext.charCodeAt(i);
			if (c < 128) {
				string += String.fromCharCode(c);
				i++;
			} else if((c > 191) && (c < 224)) {
				c2 = utftext.charCodeAt(i+1);
				string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
				i += 2;
			} else {
				c2 = utftext.charCodeAt(i+1);
				c3 = utftext.charCodeAt(i+2);
				string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
				i += 3;
			}
		}
		return string;
	}
}

/** 
* json对象转字符串形式 
*/ 
function json2str(o) { 
	var S = []; 
	var J = ""; 
	if (Object.prototype.toString.apply(o) === '[object Array]' && o.length > 0) { 
	for (var i = 0; i < o.length; i++) 
	  S.push(json2str(o[i]));
	  J = '[' + S.join(',') + ']'; 
	} 
	else if (Object.prototype.toString.apply(o) === '[object Date]') { 
	  J = "new Date(" + o.getTime() + ")"; 
	} 
	else if (Object.prototype.toString.apply(o) === '[object RegExp]' || Object.prototype.toString.apply(o) === '[object Function]') { 
	  J = o.toString(); 
	} 
	else if (Object.prototype.toString.apply(o) === '[object Object]') { 
	  for (var i in o) { 
	    o[i] = typeof (o[i]) == 'string' ? '"' + o[i] + '"' : (typeof (o[i]) === 'object' ? json2str(o[i]) : o[i]); 
	    S.push(i + ':' + o[i]); 
	  } 
	  J = '{' + S.join(',') + '}'; 
	} 
	
	return J; 
} 
